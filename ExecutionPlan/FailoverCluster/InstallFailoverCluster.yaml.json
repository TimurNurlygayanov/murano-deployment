{
  "Commands": [
    {
      "Name": "New-FailoverCluster",
      "Arguments": {
        "ClusterName": "$clusterName",
        "ClusterNodes": "$clusterNodes",
        "UserPassword": "$userPassword",
        "UserName": "$userName",
        "StaticAddress": "$clusterIP"
      }
    }
  ],
  "RebootOnCompletion": 0,
  "Scripts": [
    "SW1wb3J0LU1vZHVsZSBDb3JlRnVuY3Rpb25zIC1Gb3JjZQ==",
    "PCMNCi5ERVNDUklQVElPTg0KDQojIyBGYWlsb3ZlciBDbHVzdGVyIElucHV0IERhdGEgKGZyb20gdGhlIFVJKQ0KDQoqIERvbWFpbiBNZW1iZXJzaGlwDQogICAgLSBbU3RyaW5nXSAvIFtTZWxlY3QgYm94XSAkRG9tYWluTmFtZSAtIERvbWFpbiBuYW1lDQoqIERvbWFpbiBVc2VyIENyZWRlbnRpYWxzDQogICAgLSBbU3RyaW5nXSAkVXNlck5hbWUgLSBVc2VybmFtZQ0KICAgIC0gW1Bhc3N3b3JkIHN0cmluZ10gJFVzZXJQYXNzd29yZCAtIFVzZXIgcGFzc3dvcmQNCiogU2hhcmVkIEZvbGRlciBJbmZvcm1hdGlvbg0KICAgIC0gW1N0cmluZ10gJFNoYXJlU2VydmVyIC0gU2VydmVyIHdoaWNoIHdpbGwgaG9zdCB0aGUgZm9sZGVyDQogICAgLSBbU3RyaW5nXSAkU2hhcmVOYW1lIC0gU2hhcmUgbmFtZQ0KICAgIC0gW1N0cmluZ10gJFNoYXJlUGF0aCAtIFNoYXJlZCBmb2xkZXIgaW50ZXJuYWwgcGF0aA0KKiBGYWlsb3ZlciBDbHVzdGVyIE1lbWJlcnMNCiAgICAtIFtTdHJpbmddICRDbHVzdGVyTmFtZSAtIENsdXN0ZXIgbmFtZQ0KICAgIC0gW1N0cmluZ10gJENsdXN0ZXJJUCAtIFN0YXRpYyBJUCBhZGRyZXNzIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgY2x1c3Rlcg0KICAgIC0gW1N0cmluZ1tdXSAkQ2x1c3Rlck5vZGVzIC0gTGlzdCBvZiBub2RlIG5hbWVzDQoNCg0KDQojIyBGYWlsb3ZlciBDbHVzdGVyIGNyZWF0aW9uIHdvcmtmbG93DQoNCiogQ3JlYXRlIEFEIGRvbWFpbg0KKiBKb2luIGFsbCB0aGUgVk1zIHRvIHRoYXQgZG9tYWluDQoqIFByZXBhcmUgbm9kZXMNCiAgICAtIEluc3RhbGwgRmFpbG92ZXIgQ2x1c3RlciBwcmVyZXF1aXNpdGVzIG9uIGFsbCBGQyBub2Rlcw0KKiBDcmVhdGUgZmFpbG92ZXIgY2x1c3Rlcg0KICAgIC0gQ3JlYXRlIG5ldyBjbHVzdGVyDQogICAgLSBBZGQgbWVtYmVycw0KKiBDb25mdWd1cmUgRkMgcXVvcnVtDQogICAgLSBDcmVhdGUgbmV3IGZvbGRlciB0aGF0IHdpbGwgYmUgc2hhcmVkDQogICAgLSBTaGFyZSB0aGF0IGZvbGRlciB3aXRoIGFwcHJvcHJpYXRlIHBlcm1pc3Npb25zDQogICAgLSBDb25maWd1cmUgcXVvcnVtIG1vZGUNCg0KDQoNCiMjIEhlbHBmdWwgU21iU2hhcmUqIEZ1bmN0aW9ucw0KDQoqIE5ldy1TbWJTaGFyZQ0KKiBHcmFudC1TbWJTaGFyZUFjY2Vzcw0KDQojPg0KDQoNCg0KZnVuY3Rpb24gU3RhcnQtUG93ZXJTaGVsbFByb2Nlc3Mgew0KCXBhcmFtICgNCgkJW1N0cmluZ10gJENvbW1hbmQsDQoJCSRDcmVkZW50aWFsID0gJG51bGwNCgkpDQoJDQoJJEJ5dGVzID0gW1RleHQuRW5jb2RpbmddOjpVbmljb2RlLkdldEJ5dGVzKCRDb21tYW5kKQ0KCSRFbmNvZGVkQ29tbWFuZCA9IFtDb252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJEJ5dGVzKQ0KDQoJV3JpdGUtTG9nICRFbmNvZGVkQ29tbWFuZA0KDQoJJFN0ZE91dCA9IFtJTy5QYXRoXTo6R2V0VGVtcEZpbGVOYW1lKCkNCgkkU3RkRXJyID0gW0lPLlBhdGhdOjpHZXRUZW1wRmlsZU5hbWUoKQ0KCSRBcmd1bWVudExpc3QgPSBAKCctT3V0cHV0Rm9ybWF0JywgJ1hNTCcsICctRW5jb2RlZENvbW1hbmQnLCAkRW5jb2RlZENvbW1hbmQpDQoNCglpZiAoJENyZWRlbnRpYWwgLWVxICRudWxsKSB7DQoJCSRQcm9jZXNzID0gU3RhcnQtUHJvY2VzcyAtRmlsZVBhdGggJ3Bvd2Vyc2hlbGwuZXhlJyBgDQoJCQktQXJndW1lbnRMaXN0IEAoJEFyZ3VtZW50TGlzdCkgYA0KCQkJLVJlZGlyZWN0U3RhbmRhcmRPdXRwdXQgJFN0ZE91dCBgDQoJCQktUmVkaXJlY3RTdGFuZGFyZEVycm9yICRTdGRFcnIgYA0KCQkJLU5vTmV3V2luZG93IGANCgkJCS1XYWl0IGANCiAgICAgICAgICAgIC1QYXNzVGhydQ0KCX0NCgllbHNlIHsNCgkJJFByb2Nlc3MgPSBTdGFydC1Qcm9jZXNzIC1GaWxlUGF0aCAncG93ZXJzaGVsbC5leGUnIGANCgkJCS1Bcmd1bWVudExpc3QgQCgkQXJndW1lbnRMaXN0KSBgDQoJCQktUmVkaXJlY3RTdGFuZGFyZE91dHB1dCAkU3RkT3V0IGANCgkJCS1SZWRpcmVjdFN0YW5kYXJkRXJyb3IgJFN0ZEVyciBgDQoJCQktQ3JlZGVudGlhbCAkQ3JlZGVudGlhbCBgDQoJCQktTm9OZXdXaW5kb3cgYA0KCQkJLVdhaXQgYA0KICAgICAgICAgICAgLVBhc3NUaHJ1DQoJfQ0KDQoJaWYgKChHZXQtSXRlbSAkU3RkT3V0KS5MZW5ndGggLWd0IDApIHsNCgkJSW1wb3J0LUNsaXhtbCAkU3RkT3V0DQoJfQ0KDQoJaWYgKChHZXQtSXRlbSAkU3RkRXJyKS5MZW5ndGggLWd0IDApIHsNCgkJSW1wb3J0LUNsaXhtbCAkU3RkRXJyDQoJfQ0KDQogICAgaWYgKCRQcm9jZXNzLkV4aXRDb2RlIC1uZSAwKSB7DQogICAgICAgIHRocm93KCJFeHRlcm5hbCBQb3dlclNoZWxsIHByb2Nlc3MgZXhpdGVkIHdpdGggY29kZSAnJCgkUHJvY2Vzcy5FeGl0Q29kZSknIikNCiAgICB9DQoNCiAgICAjUmVtb3ZlLUl0ZW0gJFN0ZE91dCAtRm9yY2UNCiAgICAjUmVtb3ZlLUl0ZW0gJFN0ZEVyciAtRm9yY2UNCn0NCg0KDQoNCmZ1bmN0aW9uIEluc3RhbGwtRmFpbG92ZXJDbHVzdGVyUHJlcmVxdWlzaXRlcyB7DQogICAgSW1wb3J0LU1vZHVsZSBGYWlsb3ZlckNsdXN0ZXJzDQoNCiAgICBBZGQtV2luZG93c0ZlYXR1cmUgRmFpbG92ZXItQ2x1c3RlcmluZywgUlNBVC1DbHVzdGVyaW5nLVBvd2VyU2hlbGwNCn0NCg0KDQoNCmZ1bmN0aW9uIE5ldy1GYWlsb3ZlckNsdXN0ZXJTaGFyZWRGb2xkZXIgew0KCXBhcmFtICgNCiAgICAgICAgW1N0cmluZ10gJENsdXN0ZXJOYW1lLA0KICAgICAgICBbU3RyaW5nXSAkRG9tYWluTmFtZSwNCiAgICAgICAgW1N0cmluZ10gJFNoYXJlU2VydmVyLA0KCQlbU3RyaW5nXSAkU2hhcmVQYXRoLA0KCQlbU3RyaW5nXSAkU2hhcmVOYW1lLA0KICAgICAgICBbU3RyaW5nXSAkVXNlck5hbWUsDQogICAgICAgIFtTdHJpbmddICRVc2VyUGFzc3dvcmQsDQogICAgICAgICRDcmVkZW50aWFsID0gJG51bGwNCgkpDQogICAgDQogICAgaWYgKCRDcmVkZW50aWFsIC1lcSAkbnVsbCkgew0KICAgICAgICAkQ3JlZGVudGlhbCA9IE5ldy1DcmVkZW50aWFsIC1Vc2VyTmFtZSAiJERvbWFpbk5hbWVcJFVzZXJOYW1lIiAtUGFzc3dvcmQgIiRVc2VyUGFzc3dvcmQiDQogICAgfQ0KDQogICAgaWYgKChUZXN0LUNvbm5lY3Rpb24gLUNvbXB1dGVyTmFtZSAkU2hhcmVTZXJ2ZXIgLUNvdW50IDEgLVF1aWV0KSAtZXEgJGZhbHNlKSB7DQogICAgICAgIHRocm93KCJTZXJ2ZXIgJyRTaGFyZVNlcnZlcicgaXMgdW5yZWFjaGFibGUgdmlhIElDTVAuIikNCiAgICB9DQoNCiAgICAkU2Vzc2lvbiA9IE5ldy1QU1Nlc3Npb24gLUNvbXB1dGVyTmFtZSAkU2hhcmVTZXJ2ZXIgLUNyZWRlbnRpYWwgJENyZWRlbnRpYWwNCg0KICAgIEludm9rZS1Db21tYW5kIC1TZXNzaW9uICRTZXNzaW9uIC1TY3JpcHRCbG9jayB7DQogICAgICAgICAgICBwYXJhbSAoDQogICAgICAgICAgICAgICAgW1N0cmluZ10gJFNoYXJlUGF0aCwNCiAgICAgICAgICAgICAgICBbU3RyaW5nXSAkU2hhcmVOYW1lLA0KICAgICAgICAgICAgICAgIFtTdHJpbmddICRDbHVzdGVyQWNjb3VudA0KICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICBOZXctSXRlbSAtUGF0aCAkU2hhcmVQYXRoIC1JdGVtVHlwZSBDb250YWluZXIgLUZvcmNlDQogICAgICAgICAgICANCiAgICAgICAgICAgIE5ldy1TbWJTaGFyZSAtUGF0aCAkU2hhcmVQYXRoIGANCiAgICAgICAgICAgICAgICAtTmFtZSAkU2hhcmVOYW1lIGANCiAgICAgICAgICAgICAgICAtRnVsbEFjY2VzcyAiJENsdXN0ZXJBY2NvdW50IiBgDQogICAgICAgICAgICAgICAgLURlc2NyaXB0aW9uICJTaGFyZWQgZm9sZGVyIGZvciBGYWlsb3ZlciBDbHVzdGVyLiINCg0KICAgICAgICB9IC1Bcmd1bWVudExpc3QgJFNoYXJlUGF0aCwgJFNoYXJlTmFtZSwgIiREb21haW5OYW1lXCRDbHVzdGVyTmFtZWAkIg0KDQogICAgU2V0LUNsdXN0ZXJRdW9ydW0gLU5vZGVBbmRGaWxlU2hhcmVNYWpvcml0eSAiXFwkU2hhcmVTZXJ2ZXJcJFNoYXJlTmFtZSINCn0NCg0KDQoNCmZ1bmN0aW9uIE5ldy1GYWlsb3ZlckNsdXN0ZXIgew0KCXBhcmFtICgNCgkJW1N0cmluZ10gJENsdXN0ZXJOYW1lLA0KCQlbU3RyaW5nXSAkU3RhdGljQWRkcmVzcywNCgkJW1N0cmluZ1tdXSAkQ2x1c3Rlck5vZGVzLA0KICAgICAgICBbU3RyaW5nXSAkVXNlck5hbWUsDQogICAgICAgIFtTdHJpbmddICRVc2VyUGFzc3dvcmQsDQogICAgICAgICRDcmVkZW50aWFsDQoJKQ0KDQogICAgaWYgKCRDcmVkZW50aWFsIC1lcSAkbnVsbCkgew0KICAgICAgICAkQ3JlZGVudGlhbCA9IE5ldy1DcmVkZW50aWFsIC1Vc2VyTmFtZSAiJERvbWFpbk5hbWVcJFVzZXJOYW1lIiAtUGFzc3dvcmQgIiRVc2VyUGFzc3dvcmQiDQogICAgfQ0KDQogICAgSW1wb3J0LU1vZHVsZSBGYWlsb3ZlckNsdXN0ZXJzDQoNCglpZiAoKEdldC1DbHVzdGVyICRDbHVzdGVyTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgLWVxICRudWxsKSB7DQogICAgICAgIFdyaXRlLUxvZyAiQ3JlYXRpbmcgbmV3IGNsdXN0ZXIgJyRDbHVzdGVyTmFtZScgLi4uIg0KICAgICAgICBTdGFydC1Qb3dlclNoZWxsUHJvY2VzcyAtQ29tbWFuZCBAIg0KSW1wb3J0LU1vZHVsZSBGYWlsb3ZlckNsdXN0ZXJzDQpOZXctQ2x1c3RlciAtTmFtZSAnJENsdXN0ZXJOYW1lJyAtU3RhdGljQWRkcmVzcyAnJFN0YXRpY0FkZHJlc3MnDQoiQCAtQ3JlZGVudGlhbCAkQ3JlZGVudGlhbA0KICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAxNQ0KICAgIH0NCiAgICBlbHNlIHsNCiAgICAgICAgV3JpdGUtTG9nICJDbHVzdGVyICckQ2x1c3Rlck5hbWUnIGFscmVhZHkgZXhpc3RzLiINCiAgICB9DQoNCiAgICBmb3JlYWNoICgkTm9kZSBpbiAkQ2x1c3Rlck5vZGVzKSB7DQogICAgICAgIGlmICgoR2V0LUNsdXN0ZXJOb2RlICROb2RlIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSAtZXEgJG51bGwpIHsNCiAgICAgICAgICAgIFdyaXRlLUxvZyAiQWRkaW5nIG5vZGUgJyROb2RlJyB0byB0aGUgY2x1c3RlciAnJENsdXN0ZXJOYW1lJyAuLi4iDQogICAgICAgICAgICBTdGFydC1Qb3dlclNoZWxsUHJvY2VzcyAtQ29tbWFuZCBAIg0KSW1wb3J0LU1vZHVsZSBGYWlsb3ZlckNsdXN0ZXJzDQpBZGQtQ2x1c3Rlck5vZGUgLUNsdXN0ZXIgJyRDbHVzdGVyTmFtZScgLU5hbWUgJyROb2RlJw0KIkAgLUNyZWRlbnRpYWwgJENyZWRlbnRpYWwNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIFdyaXRlLUxvZyAiTm9kZSAnJE5vZGUnIGFscmVhZHkgYSBwYXJ0IG9mIHRoZSBjbHVzdGVyICckQ2x1c3Rlck5hbWUnLiINCiAgICAgICAgfQ0KICAgIH0NCn0NCg0KDQoNCjwjDQoNCiMgRXhhbXBsZQ0KDQokRG9tYWluTmFtZSA9ICdmYy1hY21lLmxvY2FsJw0KJERvbWFpblVzZXIgPSAnQWRtaW5pc3RyYXRvcicNCiREb21haW5QYXNzd29yZCA9ICdQQHNzdzByZCcNCg0KJENsdXN0ZXJOYW1lID0gJ2ZjLXRlc3QnDQokQ2x1c3RlcklQID0gJzEwLjIwMC4wLjYwJw0KJENsdXN0ZXJOb2RlcyA9IEAoJ2ZjLW5vZGUtMDEnLCdmYy1ub2RlLTAyJywnZmMtbm9kZS0wMycpDQoNCiRTaGFyZVNlcnZlciA9ICdmYy1kYy0wMScNCiRTaGFyZU5hbWUgPSAnRkNTaGFyZScNCg0KJFNoYXJlUGF0aCA9ICJDOlwkU2hhcmVOYW1lIg0KDQoNCg0KSW1wb3J0LU1vZHVsZSBDb3JlRnVuY3Rpb25zIC1Gb3JjZQ0KDQokQ3JlZHMgPSBOZXctQ3JlZGVudGlhbCBgDQogICAgLVVzZXJOYW1lICIkRG9tYWluTmFtZVwkRG9tYWluVXNlciIgYA0KICAgIC1QYXNzd29yZCAiJERvbWFpblBhc3N3b3JkIg0KDQpOZXctRmFpbG92ZXJDbHVzdGVyIGANCiAgICAtQ2x1c3Rlck5hbWUgJENsdXN0ZXJOYW1lIGANCiAgICAtU3RhdGljQWRkcmVzcyAkQ2x1c3RlcklQIGANCiAgICAtQ2x1c3Rlck5vZGVzICRDbHVzdGVyTm9kZXMgYA0KICAgIC1DcmVkZW50aWFsICRDcmVkcw0KDQpOZXctRmFpbG92ZXJDbHVzdGVyU2hhcmVkRm9sZGVyIGANCiAgICAtQ2x1c3Rlck5hbWUgJENsdXN0ZXJOYW1lIGANCiAgICAtRG9tYWluTmFtZSAkRG9tYWluTmFtZSBgDQogICAgLVNoYXJlU2VydmVyICRTaGFyZVNlcnZlciBgDQogICAgLVNoYXJlUGF0aCAiJFNoYXJlUGF0aCIgYA0KICAgIC1TaGFyZU5hbWUgIiRTaGFyZU5hbWUiIGANCiAgICAtQ3JlZGVudGlhbCAkQ3JlZHMNCg0KIz4NCg=="
  ]
}